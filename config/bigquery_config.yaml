# BigQuery Configuration
version: "1.0"

# Connection settings (use environment variables for sensitive data)
connection:
  project_id: "${GCP_PROJECT_ID}"
  dataset_id: "${BQ_DATASET_ID}"
  table_id: "${BQ_TABLE_ID}"
  credentials_path: "${GOOGLE_APPLICATION_CREDENTIALS}"
  location: "US"  # BigQuery dataset location

# BigQuery table schema
table_schema:
  - name: datetime
    type: TIMESTAMP
    mode: REQUIRED
    description: "Date and time of the workout/exercise"
    
  - name: workout_name
    type: STRING
    mode: REQUIRED
    description: "Name or type of workout session"
    
  - name: exercise_name
    type: STRING
    mode: REQUIRED
    description: "Name of the exercise performed"
    
  - name: weight
    type: FLOAT
    mode: REQUIRED
    description: "Weight used in kg or lbs"
    
  - name: reps
    type: INTEGER
    mode: REQUIRED
    description: "Number of repetitions"
    
  - name: sets
    type: INTEGER
    mode: NULLABLE
    description: "Number of sets performed"
    
  - name: notes
    type: STRING
    mode: NULLABLE
    description: "Additional notes about the exercise"
    
  - name: duration_minutes
    type: INTEGER
    mode: NULLABLE
    description: "Duration of exercise in minutes"
    
  - name: muscle_group_level1
    type: STRING
    mode: REQUIRED
    description: "Primary muscle group classification (upper/lower/core/full_body)"
    
  - name: muscle_group_level2
    type: STRING
    mode: REQUIRED
    description: "Specific muscle group (chest/back/quads/etc)"
    
  - name: upload_timestamp
    type: TIMESTAMP
    mode: REQUIRED
    description: "Timestamp when data was uploaded to BigQuery"
    
  - name: data_source
    type: STRING
    mode: NULLABLE
    description: "Source of the data (e.g., csv_upload)"

# Upload settings
upload:
  write_disposition: "WRITE_APPEND"  # WRITE_TRUNCATE, WRITE_APPEND, WRITE_EMPTY
  create_disposition: "CREATE_IF_NEEDED"  # CREATE_IF_NEEDED, CREATE_NEVER
  batch_size: 1000
  timeout_seconds: 300
  skip_leading_rows: 0
  allow_jagged_rows: false
  allow_quoted_newlines: true
